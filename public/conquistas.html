<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathMaster - Conquistas</title>
    <link rel="stylesheet" href="css/conquistas.css">
    
    </style>
</head>

<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">M</div>
                <span>MathMaster</span>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">In√≠cio</a></li>
                    <li><a href="dashboard.html">M√≥dulos</a></li>
                    <li><a href="conquistas.html" class="active">Conquistas</a></li>
                    <li><a href="comunidade.html">Comunidade</a></li>
                </ul>
            </nav>
          <div class="user-profile">
                <div class="user-stats">
                    <div class="coins">
                        <span>ü™ô</span>
                        <span>350</span>
                    </div>
                </div>
                <div class="avatar" onclick="openProfileMenu()">A</div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="page-title">
            <div class="page-title-icon">üèÜ</div>
            <h1>Suas Conquistas</h1>
        </div>

        <div class="achievement-stats">
            <div class="stat-card">
                <div class="stat-value">27</div>
                <div class="stat-label">Conquistas Desbloqueadas</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">65%</div>
                <div class="stat-label">Taxa de Conclus√£o</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">1250</div>
                <div class="stat-label">Pontos de Conquista</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">12</div>
                <div class="stat-label">Dias na Plataforma</div>
            </div>
        </div>

        <div class="achievements-section">
            <div class="section-header">
                <div class="section-title">
                    <span>üåü</span>
                    <h2>Conquistas em Matem√°tica</h2>
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active">Todas</button>
                    <button class="filter-btn">Desbloqueadas</button>
                    <button class="filter-btn">Bloqueadas</button>
                </div>
            </div>

            <div class="achievements-grid">
                <div class="achievement-card">
                    <div class="achievement-header">
                        <div class="achievement-icon gold-tier">üî¢</div>
                        <div class="achievement-title">
                            <h3>Mestre das Derivadas</h3>
                            <span class="achievement-tier">Ouro</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Complete 10 exerc√≠cios de c√°lculo diferencial sem erros.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 10/10</span>
                                <span>Completo!</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>50 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card">
                    <div class="achievement-header">
                        <div class="achievement-icon silver-tier">üî•</div>
                        <div class="achievement-title">
                            <h3>Sequ√™ncia de Fogo</h3>
                            <span class="achievement-tier">Prata</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Estude matem√°tica por 5 dias consecutivos.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 5/5</span>
                                <span>Completo!</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>30 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card">
                    <div class="achievement-header">
                        <div class="achievement-icon gold-tier">‚ö°</div>
                        <div class="achievement-title">
                            <h3>Velocista Matem√°tico</h3>
                            <span class="achievement-tier">Ouro</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Resolva 5 problemas em menos de 3 minutos.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 5/5</span>
                                <span>Completo!</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>40 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card">
                    <div class="achievement-header">
                        <div class="achievement-icon bronze-tier">œÄ</div>
                        <div class="achievement-title">
                            <h3>Mestre da Trigonometria</h3>
                            <span class="achievement-tier">Bronze</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Complete 5 li√ß√µes de trigonometria.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 5/5</span>
                                <span>Completo!</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>20 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card">
                    <div class="achievement-header">
                        <div class="achievement-icon silver-tier">‚à´</div>
                        <div class="achievement-title">
                            <h3>Integrador</h3>
                            <span class="achievement-tier">Prata</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Resolva 15 problemas de c√°lculo integral.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 60%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 9/15</span>
                                <span>60%</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>35 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card locked">
                    <div class="locked-overlay">
                        <span>üîí</span>
                        <span>Bloqueado</span>
                    </div>
                    <div class="achievement-header">
                        <div class="achievement-icon platinum-tier">üìä</div>
                        <div class="achievement-title">
                            <h3>Estat√≠stico Mestre</h3>
                            <span class="achievement-tier">Platina</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Complete todas as li√ß√µes do m√≥dulo de estat√≠stica.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 15%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 3/20</span>
                                <span>15%</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>100 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card">
                    <div class="achievement-header">
                        <div class="achievement-icon bronze-tier">üß©</div>
                        <div class="achievement-title">
                            <h3>Solucionador de Quebra-Cabe√ßas</h3>
                            <span class="achievement-tier">Bronze</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Resolva 5 problemas l√≥gico-matem√°ticos.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 80%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 4/5</span>
                                <span>80%</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>15 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card">
                    <div class="achievement-header">
                        <div class="achievement-icon bronze-tier">üìö</div>
                        <div class="achievement-title">
                            <h3>Estudante Dedicado</h3>
                            <span class="achievement-tier">Bronze</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Complete 3 horas de estudo em um √∫nico dia.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 3/3</span>
                                <span>Completo!</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>25 moedas</span>
                        </div>
                    </div>
                </div>

                <div class="achievement-card locked">
                    <div class="locked-overlay">
                        <span>üîí</span>
                        <span>Bloqueado</span>
                    </div>
                    <div class="achievement-header">
                        <div class="achievement-icon gold-tier">üåê</div>
                        <div class="achievement-title">
                            <h3>Explorador Geom√©trico</h3>
                            <span class="achievement-tier">Ouro</span>
                        </div>
                    </div>
                    <div class="achievement-content">
                        <div class="achievement-description">
                            Resolva 20 problemas de geometria anal√≠tica.
                        </div>
                        <div class="achievement-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: 25%"></div>
                            </div>
                            <div class="progress-text">
                                <span>Progresso: 5/20</span>
                                <span>25%</span>
                            </div>
                        </div>
                        <div class="achievement-reward">
                            <span>ü™ô</span>
                            <span>45 moedas</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="milestones-section">
            <div class="section-header">
                <div class="section-title">
                    <span>üöÄ</span>
                    <h2>Marcos de Progresso</h2>
                </div>
            </div>

            <div class="milestone-timeline">
                <div class="timeline-line"></div>

                <div class="milestone-item">
                    <div class="milestone-date">
                        <span>10</span>
                        <span>Mar</span>
                    </div>
                    <div class="milestone-content">
                        <div class="milestone-title">
                            <h3>Primeiros Passos</h3>
                            <span class="milestone-badge">Conclu√≠do</span>
                        </div>
                        <p>Voc√™ completou seu primeiro m√≥dulo de matem√°tica!</p>
                        <div class="achievement-badges">
                            <div class="badge-item">üî¢</div>
                            <div class="badge-item">œÄ</div>
                        </div>
                    </div>
                </div>

                <div class="milestone-item">
                    <div class="milestone-date">
                        <span>15</span>
                        <span>Mar</span>
                    </div>
                    <div class="milestone-content">
                        <div class="milestone-title">
                            <h3>Superando Desafios</h3>
                            <span class="milestone-badge">Conclu√≠do</span>
                        </div>
                        <p>Voc√™ resolveu 50 exerc√≠cios em uma semana!</p>
                        <div class="achievement-badges">
                            <div class="badge-item">‚ö°</div>
                            <div class="badge-item">üî•</div>
                            <div class="badge-item">üìö</div>
                        </div>
                    </div>
                </div>

                <div class="milestone-item">
                    <div class="milestone-date">
                        <span>18</span>
                        <span>Mar</span>
                    </div>
                    <div class="milestone-content">
                        <div class="milestone-title">
                            <h3>C√°lculo Avan√ßado</h3>
                            <span class="milestone-badge">Em Progresso</span>
                        </div>
                        <p>Complete o m√≥dulo de c√°lculo diferencial e integral.</p>
                        <div class="achievement-badges">
                            <div class="badge-item">‚à´</div>
                            <div class="badge-item locked">üìä</div>
                        </div>
                    </div>
                </div>

                <div class="milestone-item">
                    <div class="milestone-date future">
                        <span>25</span>
                        <span>Mar</span>
                    </div>
                    <div class="milestone-content">
                        <div class="milestone-title">
                            <h3>Estat√≠stica e Probabilidade</h3>
                            <span class="milestone-badge">Futuro</span>
                        </div>
                        <p>Domine os conceitos de estat√≠stica descritiva e probabilidade.</p>
                        <div class="achievement-badges">
                            <div class="badge-item locked">üìä</div>
                            <div class="badge-item locked">üé≤</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="ranking-section">
            <div class="section-header">
                <div class="section-title">
                    <span>üèÖ</span>
                    <h2>Ranking de Conquistas</h2>
                </div>
            </div>

            <div class="ranking-tabs">
                <div class="ranking-tab active">Global</div>
                <div class="ranking-tab">Amigos</div>
                <div class="ranking-tab">Semanal</div>
            </div>

            <div class="ranking-list">
                <div class="ranking-item ranking-header">
                    <div>Rank</div>
                    <div>Usu√°rio</div>
                    <div>Pontos</div>
                    <div class="completion-header">Conclus√£o</div>
                </div>

                <div class="ranking-item">
                    <div class="ranking-position top-position">1</div>
                    <div class="user-info">
                        <div class="user-avatar">M</div>
                        <div>MathWizard</div>
                    </div>
                    <div class="achievement-points">2450</div>
                    <div class="completion-rate">95%</div>
                </div>

                <div class="ranking-item">
                    <div class="ranking-position top-position">2</div>
                    <div class="user-info">
                        <div class="user-avatar">C</div>
                        <div>CalcMaster</div>
                    </div>
                    <div class="achievement-points">2180</div>
                    <div class="completion-rate">88%</div>
                </div>

                <div class="ranking-item">
                    <div class="ranking-position top-position">3</div>
                    <div class="user-info">
                        <div class="user-avatar">P</div>
                        <div>ProblemSolver</div>
                    </div>
                    <div class="achievement-points">1920</div>
                    <div class="completion-rate">82%</div>
                </div>

                <div class="ranking-item current-user">
                    <div class="ranking-position">7</div>
                    <div class="user-info">
                        <div class="user-avatar">A</div>
                        <div>Voc√™</div>
                    </div>
                    <div class="achievement-points">1250</div>
                    <div class="completion-rate">65%</div>
                </div>

                <div class="ranking-item">
                    <div class="ranking-position">8</div>
                    <div class="user-info">
                        <div class="user-avatar">G</div>
                        <div>GeoGenius</div>
                    </div>
                    <div class="achievement-points">1180</div>
                    <div class="completion-rate">60%</div>
                </div>

                <div class="ranking-item">
                    <div class="ranking-position">9</div>
                    <div class="user-info">
                        <div class="user-avatar">T</div>
                        <div>TrigonometryTitan</div>
                    </div>
                    <div class="achievement-points">1050</div>
                    <div class="completion-rate">55%</div>
                </div>

                <div class="ranking-item">
                    <div class="ranking-position">10</div>
                    <div class="user-info">
                        <div class="user-avatar">S</div>
                        <div>StatStudent</div>
                    </div>
                    <div class="achievement-points">980</div>
                    <div class="completion-rate">52%</div>
                </div>
            </div>
        </div>
    </div>

        <!-- Modal de Login R√°pido -->
    <div class="quick-login-modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login R√°pido</h2>
                <span class="close-modal" onclick="closeLoginModal()">√ó</span>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="Seu email">
            </div>
            <div class="form-group">
                <label for="password">Senha</label>
                <input type="password" id="password" placeholder="Sua senha">
            </div>
            <div class="form-actions">
                <button class="btn btn-outline" onclick="closeLoginModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="quickLogin()">Entrar</button>
            </div>
            <p style="margin-top: 15px; text-align: center;">
                <a href="login.html" style="color: var(--primary); text-decoration: none;">
                    Ir para p√°gina de login completa
                </a>
            </p>
        </div>
    </div>
    </div>

    <script>
        // JavaScript b√°sico para funcionalidade dos bot√µes de filtro
        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');

                // L√≥gica de filtro real seria implementada aqui
            });
        });

        // JavaScript para funcionalidade das abas de ranking
        document.querySelectorAll('.ranking-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.ranking-tab').forEach(t => {
                    t.classList.remove('active');
                });
                tab.classList.add('active');

                // L√≥gica de troca de dados de ranking seria implementada aqui
            });
        });

        // Dados simulados para uso nas funcionalidades
const achievementData = {
    all: [
        {
            id: 1,
            title: "Mestre das Derivadas",
            icon: "üî¢",
            tier: "gold-tier",
            tierName: "Ouro",
            description: "Complete 10 exerc√≠cios de c√°lculo diferencial sem erros.",
            current: 10,
            total: 10,
            reward: 50,
            locked: false
        },
        {
            id: 2,
            title: "Sequ√™ncia de Fogo",
            icon: "üî•",
            tier: "silver-tier",
            tierName: "Prata",
            description: "Estude matem√°tica por 5 dias consecutivos.",
            current: 5,
            total: 5,
            reward: 30,
            locked: false
        },
        {
            id: 3,
            title: "Velocista Matem√°tico",
            icon: "‚ö°",
            tier: "gold-tier",
            tierName: "Ouro",
            description: "Resolva 5 problemas em menos de 3 minutos.",
            current: 5,
            total: 5,
            reward: 40,
            locked: false
        },
        {
            id: 4,
            title: "Mestre da Trigonometria",
            icon: "œÄ",
            tier: "bronze-tier",
            tierName: "Bronze",
            description: "Complete 5 li√ß√µes de trigonometria.",
            current: 5,
            total: 5,
            reward: 20,
            locked: false
        },
        {
            id: 5,
            title: "Integrador",
            icon: "‚à´",
            tier: "silver-tier",
            tierName: "Prata",
            description: "Resolva 15 problemas de c√°lculo integral.",
            current: 9,
            total: 15,
            reward: 35,
            locked: false
        },
        {
            id: 6,
            title: "Estat√≠stico Mestre",
            icon: "üìä",
            tier: "platinum-tier",
            tierName: "Platina",
            description: "Complete todas as li√ß√µes do m√≥dulo de estat√≠stica.",
            current: 3,
            total: 20,
            reward: 100,
            locked: true
        },
        {
            id: 7,
            title: "Solucionador de Quebra-Cabe√ßas",
            icon: "üß©",
            tier: "bronze-tier",
            tierName: "Bronze",
            description: "Resolva 5 problemas l√≥gico-matem√°ticos.",
            current: 4,
            total: 5,
            reward: 15,
            locked: false
        },
        {
            id: 8,
            title: "Estudante Dedicado",
            icon: "üìö",
            tier: "bronze-tier",
            tierName: "Bronze",
            description: "Complete 3 horas de estudo em um √∫nico dia.",
            current: 3,
            total: 3,
            reward: 25,
            locked: false
        },
        {
            id: 9,
            title: "Explorador Geom√©trico",
            icon: "üåê",
            tier: "gold-tier",
            tierName: "Ouro",
            description: "Resolva 20 problemas de geometria anal√≠tica.",
            current: 5,
            total: 20,
            reward: 45,
            locked: true
        }
    ]
};

// Dados simulados dos t√≥picos que o usu√°rio est√° aprendendo
const userTopics = {
    topics: [
        {
            id: 1,
            name: "√Ålgebra",
            icon: "üî¢",
            progress: 75
        },
        {
            id: 2,
            name: "C√°lculo",
            icon: "‚à´",
            progress: 60
        },
        {
            id: 3,
            name: "Trigonometria",
            icon: "œÄ",
            progress: 90
        }
    ]
};

// Fun√ß√£o para verificar se uma conquista pertence a um t√≥pico que o usu√°rio est√° aprendendo
function isAchievementInUserTopics(achievement) {
    const achievementTopics = achievement.description.toLowerCase();
    return userTopics.topics.some(topic => 
        achievementTopics.includes(topic.name.toLowerCase()) ||
        achievement.title.toLowerCase().includes(topic.name.toLowerCase())
    );
}

// Fun√ß√£o para renderizar a lista de conquistas com base no filtro
function renderAchievements(filter = 'all') {
    const achievementsGrid = document.querySelector('.achievements-grid');
    let filteredAchievements;
    
    switch(filter) {
        case 'unlocked':
            filteredAchievements = achievementData.all.filter(a => !a.locked);
            break;
        case 'locked':
            filteredAchievements = achievementData.all.filter(a => a.locked);
            break;
        default:
            filteredAchievements = achievementData.all;
    }
    
    // Filtrar apenas conquistas dos t√≥picos que o usu√°rio est√° aprendendo
    filteredAchievements = filteredAchievements.filter(isAchievementInUserTopics);
    
    achievementsGrid.innerHTML = '';
    filteredAchievements.forEach(achievement => {
        achievementsGrid.innerHTML += createAchievementCard(achievement);
    });
}

// Fun√ß√£o para criar elemento de conquista
function createAchievementCard(achievement) {
    const progress = Math.floor((achievement.current / achievement.total) * 100);
    const isComplete = achievement.current >= achievement.total;
    
    return `
        <div class="achievement-card ${achievement.locked ? 'locked' : ''}">
            ${achievement.locked ? '<div class="locked-overlay"><span>üîí</span><span>Bloqueado</span></div>' : ''}
            <div class="achievement-header">
                <div class="achievement-icon ${achievement.tier}">${achievement.icon}</div>
                <div class="achievement-title">
                    <h3>${achievement.title}</h3>
                    <span class="achievement-tier">${achievement.tierName}</span>
                </div>
            </div>
            <div class="achievement-content">
                <div class="achievement-description">
                    ${achievement.description}
                </div>
                <div class="achievement-progress">
                    <div class="progress-bar-container">
                        <div class="progress-bar" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-text">
                        <span>Progresso: ${achievement.current}/${achievement.total}</span>
                        <span>${isComplete ? 'Completo!' : progress + '%'}</span>
                    </div>
                </div>
                <div class="achievement-reward">
                    <span>ü™ô</span>
                    <span>${achievement.reward} moedas</span>
                </div>
            </div>
        </div>
    `;
}

// Fun√ß√£o para renderizar o ranking com base na categoria selecionada
function renderRanking(category = 'global') {
    const rankingList = document.querySelector('.ranking-list');
    const data = rankingData[category];
    
    let html = `
        <div class="ranking-item ranking-header">
            <div>Rank</div>
            <div>Usu√°rio</div>
            <div>Pontos</div>
            <div class="completion-header">Conclus√£o</div>
        </div>
    `;
    
    data.forEach(user => {
        html += `
            <div class="ranking-item ${user.currentUser ? 'current-user' : ''}">
                <div class="ranking-position ${user.position <= 3 ? 'top-position' : ''}">${user.position}</div>
                <div class="user-info">
                    <div class="user-avatar">${user.avatar}</div>
                    <div>${user.name}</div>
                </div>
                <div class="achievement-points">${user.points}</div>
                <div class="completion-rate">${user.completion}%</div>
            </div>
        `;
    });
    
    rankingList.innerHTML = html;
}

// Fun√ß√£o para mostrar detalhes de milestone ao clicar
function setupMilestoneInteractions() {
    const milestoneItems = document.querySelectorAll('.milestone-item');
    
    milestoneItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            const milestone = milestoneData[index];
            
            // Criar e mostrar modal com detalhes expandidos
            showMilestoneModal(milestone);
        });
    });
}

// Fun√ß√£o para exibir modal de detalhes do marco de progresso
function showMilestoneModal(milestone) {
    // Remover modal anterior se existir
    const oldModal = document.querySelector('.milestone-modal');
    if (oldModal) {
        oldModal.remove();
    }
    
    // Criar o elemento modal
    const modal = document.createElement('div');
    modal.className = 'milestone-modal';
    
    // Estilo para o modal
    modal.style.position = 'fixed';
    modal.style.top = '50%';
    modal.style.left = '50%';
    modal.style.transform = 'translate(-50%, -50%)';
    modal.style.backgroundColor = 'var(--white)';
    modal.style.padding = '30px';
    modal.style.borderRadius = '10px';
    modal.style.boxShadow = '0 10px 25px rgba(0, 0, 0, 0.2)';
    modal.style.zIndex = '100';
    modal.style.maxWidth = '600px';
    modal.style.width = '90%';
    
    // Criar overlay de fundo
    const overlay = document.createElement('div');
    overlay.className = 'modal-overlay';
    overlay.style.position = 'fixed';
    overlay.style.top = '0';
    overlay.style.left = '0';
    overlay.style.right = '0';
    overlay.style.bottom = '0';
    overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
    overlay.style.zIndex = '99';
    
    let badgesHtml = '';
    milestone.badges.forEach(badge => {
        badgesHtml += `
            <div class="badge-item ${badge.locked ? 'locked' : ''}" 
                 style="width: 50px; height: 50px; font-size: 24px;">
                ${badge.icon}
            </div>
        `;
    });
    
    // Conte√∫do do modal
    modal.innerHTML = `
        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
            <h2 style="color: var(--primary); font-size: 24px;">${milestone.title}</h2>
            <span class="close-modal" style="cursor: pointer; font-size: 24px;">√ó</span>
        </div>
        <div style="display: flex; gap: 15px; margin-bottom: 15px;">
            <div style="background-color: ${milestone.date.future ? 'var(--light-bg)' : 'var(--primary)'}; 
                        color: ${milestone.date.future ? '#999' : 'var(--white)'};
                        border-radius: 50%; width: 60px; height: 60px; 
                        display: flex; flex-direction: column; align-items: center; 
                        justify-content: center; font-weight: bold;">
                <span>${milestone.date.day}</span>
                <span>${milestone.date.month}</span>
            </div>
            <div>
                <div style="font-weight: bold; margin-bottom: 5px;">Status: 
                    <span style="background-color: var(--accent); padding: 3px 8px; 
                           border-radius: 15px; color: var(--primary); font-size: 12px;">
                        ${milestone.status}
                    </span>
                </div>
                <p style="margin-bottom: 15px;">${milestone.description}</p>
            </div>
        </div>
        <div>
            <h3 style="margin-bottom: 10px; color: var(--primary);">Conquistas Relacionadas</h3>
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                ${badgesHtml}
            </div>
        </div>
        <div style="margin-top: 20px; text-align: right;">
            <button class="close-button" style="background-color: var(--primary); color: var(--white); 
                    border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer;">
                Fechar
            </button>
        </div>
    `;
    
    // Adicionar modal e overlay ao corpo da p√°gina
    document.body.appendChild(overlay);
    document.body.appendChild(modal);
    
    // Configurar eventos para fechar o modal
    const closeModal = () => {
        modal.remove();
        overlay.remove();
    };
    
    modal.querySelector('.close-modal').addEventListener('click', closeModal);
    modal.querySelector('.close-button').addEventListener('click', closeModal);
    overlay.addEventListener('click', closeModal);
}

// Fun√ß√£o para atualizar estat√≠sticas do usu√°rio
function updateUserStats(data) {
    document.querySelector('.stat-value:nth-child(1)').textContent = data.unlockedAchievements;
    document.querySelector('.stat-value:nth-child(3)').textContent = data.completionRate + '%';
    document.querySelector('.stat-value:nth-child(5)').textContent = data.achievementPoints;
    document.querySelector('.stat-value:nth-child(7)').textContent = data.daysActive;
    
    // Atualizar moedas no cabe√ßalho
    document.querySelector('.coins span:nth-child(2)').textContent = data.coins;
}

// Fun√ß√£o para simular progresso em tempo real para conquistas em andamento
function simulateProgress() {
    // Selecionar uma conquista n√£o completa aleatoriamente
    const incompletedAchievements = achievementData.all.filter(a => !a.locked && a.current < a.total);
    
    if (incompletedAchievements.length > 0) {
        const randomIndex = Math.floor(Math.random() * incompletedAchievements.length);
        const achievement = incompletedAchievements[randomIndex];
        
        // Incrementar progresso
        if (achievement.current < achievement.total) {
            achievement.current += 1;
            
            // Atualizar interface
            renderAchievements(document.querySelector('.filter-btn.active').textContent.toLowerCase());
            
            // Se completou, atualizar estat√≠sticas
            if (achievement.current === achievement.total) {
                const userStatsData = {
                    unlockedAchievements: parseInt(document.querySelector('.stat-value:nth-child(1)').textContent) + 1,
                    completionRate: Math.floor((parseInt(document.querySelector('.stat-value:nth-child(1)').textContent) + 1) / achievementData.all.length * 100),
                    achievementPoints: parseInt(document.querySelector('.stat-value:nth-child(5)').textContent) + achievement.reward,
                    daysActive: parseInt(document.querySelector('.stat-value:nth-child(7)').textContent),
                    coins: parseInt(document.querySelector('.coins span:nth-child(2)').textContent) + achievement.reward
                };
                
                updateUserStats(userStatsData);
                
                // Mostrar notifica√ß√£o de conclus√£o
                showAchievementNotification(achievement);
            }
        }
    }
}

// Fun√ß√£o para mostrar notifica√ß√£o de conquista conclu√≠da
function showAchievementNotification(achievement) {
    const notification = document.createElement('div');
    notification.className = 'achievement-notification';
    
    // Estilo para a notifica√ß√£o
    notification.style.position = 'fixed';
    notification.style.bottom = '20px';
    notification.style.right = '20px';
    notification.style.backgroundColor = 'var(--primary)';
    notification.style.color = 'var(--white)';
    notification.style.padding = '15px 20px';
    notification.style.borderRadius = '8px';
    notification.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
    notification.style.display = 'flex';
    notification.style.alignItems = 'center';
    notification.style.gap = '15px';
    notification.style.zIndex = '999';
    notification.style.opacity = '0';
    notification.style.transform = 'translateY(20px)';
    notification.style.transition = 'all 0.3s ease';
    
    notification.innerHTML = `
        <div style="background-color: var(--accent); color: var(--primary); width: 40px; 
                    height: 40px; border-radius: 50%; display: flex; align-items: center; 
                    justify-content: center; font-size: 20px;">
            ${achievement.icon}
        </div>
        <div>
            <h4 style="margin-bottom: 5px;">Conquista Desbloqueada!</h4>
            <p>${achievement.title}</p>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    // Anima√ß√£o de entrada
    setTimeout(() => {
        notification.style.opacity = '1';
        notification.style.transform = 'translateY(0)';
    }, 100);
    
    // Remover ap√≥s alguns segundos
    setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 5000);
}

// Inicializa√ß√£o do script quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', async function() {
    try {
        // Inicializar dados do usu√°rio
        const userData = await MathMasterAPI.User.getUserData();
        const userStats = await MathMasterAPI.User.getUserStats();
        const achievements = await MathMasterAPI.Achievements.getUserAchievements();
        const topics = await MathMasterAPI.Topics.getUserTopics();
        
        // Atualizar interface com dados reais
        updateUserInterface(userData);
        updateUserStats(userStats);
        
        // Inicializar filtros de conquistas
        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', async () => {
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                button.classList.add('active');
                
                // Aplicar filtro com base no texto do bot√£o
                const filter = button.textContent.toLowerCase();
                const filterType = filter === 'todas' ? 'all' : 
                                 filter === 'desbloqueadas' ? 'unlocked' : 'locked';
                
                // Buscar conquistas filtradas
                const filteredAchievements = await MathMasterAPI.Achievements.getFilteredAchievements(filterType);
                renderAchievements(filteredAchievements);
            });
        });
        
        // Inicializar abas de ranking
        document.querySelectorAll('.ranking-tab').forEach(tab => {
            tab.addEventListener('click', async () => {
                document.querySelectorAll('.ranking-tab').forEach(t => {
                    t.classList.remove('active');
                });
                tab.classList.add('active');
                
                // Buscar dados do ranking com base na aba selecionada
                const category = tab.textContent.toLowerCase();
                let rankingData;
                
                switch(category) {
                    case 'global':
                        rankingData = await MathMasterAPI.Ranking.getGlobalRanking();
                        break;
                    case 'amigos':
                        rankingData = await MathMasterAPI.Ranking.getFriendsRanking();
                        break;
                    case 'semanal':
                        rankingData = await MathMasterAPI.Ranking.getWeeklyRanking();
                        break;
                }
                
                renderRanking(rankingData);
            });
        });
        
        // Configurar intera√ß√µes de marcos de progresso
        setupMilestoneInteractions();
        
        // Inicializar dados
        const initialAchievements = await MathMasterAPI.Achievements.getFilteredAchievements('all');
        const globalRanking = await MathMasterAPI.Ranking.getGlobalRanking();
        
        renderAchievements(initialAchievements);
        renderRanking(globalRanking);
        
        // Adicionar intera√ß√£o ao avatar do usu√°rio
        document.querySelector('.avatar').addEventListener('click', () => {
            openProfileMenu();
        });
        
        // Atualizar progresso periodicamente
        setInterval(async () => {
            const stats = await MathMasterAPI.User.getUserStats();
            updateUserStats(stats);
        }, 30000);
        
    } catch (error) {
        console.error('Erro ao carregar dados:', error);
        // Tratar erro apropriadamente (mostrar mensagem ao usu√°rio, etc.)
    }
});
//------------------------------------------------------------------------------------------

  function openProfileMenu() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        function quickLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (!email || !password) {
                alert('Por favor, preencha todos os campos');
                return;
            }

            // Aqui voc√™ implementaria a l√≥gica real de login
            // Por enquanto, apenas redirecionamos para o dashboard
            window.location.href = 'dashboard.html';
        }


//------------------------------------------------------------------------------------------




// Fun√ß√£o para renderizar conquistas
function renderAchievements(achievements) {
    const achievementsGrid = document.querySelector('.achievements-grid');
    achievementsGrid.innerHTML = achievements.map(achievement => createAchievementCard(achievement)).join('');
}

// Fun√ß√£o para renderizar ranking
function renderRanking(rankingData) {
    const rankingList = document.querySelector('.ranking-list');
    
    let html = `
        <div class="ranking-item ranking-header">
            <div>Rank</div>
            <div>Usu√°rio</div>
            <div>Pontos</div>
            <div class="completion-header">Conclus√£o</div>
        </div>
    `;
    
    html += rankingData.map(user => `
        <div class="ranking-item ${user.isCurrentUser ? 'current-user' : ''}">
            <div class="ranking-position ${user.position <= 3 ? 'top-position' : ''}">${user.position}</div>
            <div class="user-info">
                <div class="user-avatar">${user.avatar}</div>
                <div>${user.name}</div>
            </div>
            <div class="achievement-points">${user.points}</div>
            <div class="completion-rate">${user.completion}%</div>
        </div>
    `).join('');
    
    rankingList.innerHTML = html;
}

// Fun√ß√£o para atualizar estat√≠sticas do usu√°rio
function updateUserStats(stats) {
    document.querySelector('.stat-value:nth-child(1)').textContent = stats.unlockedAchievements;
    document.querySelector('.stat-value:nth-child(3)').textContent = stats.completionRate + '%';
    document.querySelector('.stat-value:nth-child(5)').textContent = stats.achievementPoints;
    document.querySelector('.stat-value:nth-child(7)').textContent = stats.daysActive;
    
    // Atualizar moedas no cabe√ßalho
    document.querySelector('.coins span:nth-child(2)').textContent = stats.coins;
}

// Fun√ß√£o para atualizar a interface do usu√°rio
async function updateUserInterface(userData) {
    console.log('Atualizando interface com dados do usu√°rio:', userData);
    
    // Atualizar nome do usu√°rio onde for necess√°rio
    const userNameElements = document.querySelectorAll('.user-name');
    if (userNameElements.length > 0) {
        userNameElements.forEach(element => {
            element.textContent = userData.name;
        });
    }
    
    // Atualizar avatar do usu√°rio
    const avatarElements = document.querySelectorAll('.avatar');
    if (avatarElements.length > 0) {
        avatarElements.forEach(element => {
            if (element.tagName === 'DIV') {
                const initials = userData.name.split(' ').map(n => n[0]).join('').toUpperCase();
                element.textContent = initials;
            }
        });
    }
    
    // Buscar e exibir t√≥picos do usu√°rio
    try {
        const topics = await MathMasterAPI.Topics.getUserTopics();
        const userTopicsList = document.createElement('div');
        userTopicsList.className = 'user-topics';
        userTopicsList.innerHTML = `
            <h3>Seus T√≥picos Atuais</h3>
            <div class="topics-grid">
                ${topics.map(topic => `
                    <div class="topic-card">
                        <div class="topic-icon">${topic.icon}</div>
                        <div class="topic-info">
                            <div class="topic-name">${topic.name}</div>
                            <div class="topic-progress">
                                <div class="progress-bar" style="width: ${topic.progress}%"></div>
                                <span>${topic.progress}%</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
        
        // Inserir a lista de t√≥picos ap√≥s o t√≠tulo da p√°gina
        const pageTitle = document.querySelector('.page-title');
        if (pageTitle && !document.querySelector('.user-topics')) {
            pageTitle.parentNode.insertBefore(userTopicsList, pageTitle.nextSibling);
        }
    } catch (error) {
        console.error('Erro ao carregar t√≥picos:', error);
    }
}

// Fun√ß√£o para fazer logout
async function logout() {
    try {
        await MathMasterAPI.User.logout();
        // Remover token e dados do usu√°rio
        localStorage.removeItem('token');
        localStorage.removeItem('userName');
        
        // Redirecionar para a p√°gina de login
        window.location.href = '/login.html';
    } catch (error) {
        console.error('Erro ao fazer logout:', error);
    }
}

// function openProfileMenu() {
//     // Simular abertura de menu de perfil
//     const hasLoginPage = true; // Definir como true se a p√°gina de login existir
    
//     if (hasLoginPage) {
//         // Redirecionar para a p√°gina de login
//         window.location.href = 'login.html';
//     } else {
//         alert('Menu de perfil (em desenvolvimento)');
//     }
// }

// Verificar autentica√ß√£o
document.addEventListener('DOMContentLoaded', function() {
  // Verificar se h√° um token no localStorage
  const token = localStorage.getItem('token');
  if (token) {
    // Em um ambiente real, far√≠amos uma requisi√ß√£o para validar o token
    // Para fins de demonstra√ß√£o, vamos simular uma autentica√ß√£o bem-sucedida
    try {
      // Simular resposta positiva de autentica√ß√£o
      const userData = {
        name: localStorage.getItem('userName') || 'Usu√°rio',
        email: 'usuario@exemplo.com',
        id: '123456'
      };
      
      // Atualizar a interface com os dados do usu√°rio
      updateUserInterface(userData);
      
      // Inicializar o sistema de notifica√ß√µes
      if (window.NotificationSystem) {
        window.NotificationSystem.init();
      }
    } catch (error) {
      console.error('Erro ao processar autentica√ß√£o:', error);
      // Redirecionar para login em caso de erro
      window.location.href = '/login.html?redirect=conquistas.html';
    }
  } else {
    // Sem token, redirecionar para login
    window.location.href = '/login.html?redirect=conquistas.html';
  }
});

// Fun√ß√£o para habilitar o modo de tema escuro/claro
function toggleTheme() {
    document.body.classList.toggle('dark-theme');
    
    if (document.body.classList.contains('dark-theme')) {
        // Aplicar vari√°veis de estilo do tema escuro
        document.documentElement.style.setProperty('--light-bg', '#1f2937');
        document.documentElement.style.setProperty('--white', '#374151');
        document.documentElement.style.setProperty('--text', '#e5e7eb');
        document.documentElement.style.setProperty('--primary', '#60a5fa');
    } else {
        // Restaurar vari√°veis do tema claro
        document.documentElement.style.setProperty('--light-bg', '#f5f7fa');
        document.documentElement.style.setProperty('--white', '#ffffff');
        document.documentElement.style.setProperty('--text', '#333333');
        document.documentElement.style.setProperty('--primary', '#4a6fa5');
    }
}
    </script>

  <script src="api.js"></script>
  <script src="components/notifications.js"></script>
</body>

</html>